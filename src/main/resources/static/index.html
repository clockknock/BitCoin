<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>Java比特币</title>
    <link rel="stylesheet" type="text/css" href="css/bootstrap.css"/>
    <link rel="stylesheet" type="text/css" href="css/pb.css"/>

    <style type="text/css">
        body {
            margin: 30px;
        }

        #result {
            padding: 15px;
        }
    </style>


    <script src="js/jquery-1.12.4.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="js/bootstrap.js" type="text/javascript" charset="utf-8"></script>
    <script src="js/pb.js" type="text/javascript" charset="utf-8"></script>
    <script src="js/jsrsasign-all-min.js" type="text/javascript" charset="utf-8"></script>
    <script type="text/javascript">
        $(function () {
            showList();
        });

        function addGenesis() {
            var content = $("#inputContent").val();
            loading.baosight.showPageLoadingMsg(false);// 显示进度条
            $.post("/addGenesis", {genesis: content}, function (data) {
                $("#result").html(data)
                loading.baosight.hidePageLoadingMsg() // 隐藏进度条
            });
        }

        function addNote() {
            var note = $("#inputContent").val();
            loading.baosight.showPageLoadingMsg(false);// 显示进度条
            $.post("/addNote", {note: note}, function (data) {
                $("#result").html(data);
                loading.baosight.hidePageLoadingMsg();// 隐藏进度条
                showList();
            });
        }

        function showList() {
            $.get("/showList", function (data) {
                //先清空再添加
                loading.baosight.showPageLoadingMsg(false); // 显示进度条
                $("#tbody").html("");
                $.each(data, function (i, n) {
                    $("#tbody").append("<tr><th scope=\"row\">" + n.id + "</th><td>" + n.content
                        + "</td><td>" + n.hash + "</td><td>" + n.nonce + "</td></tr>");
                });
                loading.baosight.hidePageLoadingMsg();// 隐藏进度条
            })
        }

        function check() {
            loading.baosight.showPageLoadingMsg(false);// 显示进度条
            $.get("/check", function (data) {
                $("#result").html(data);
                loading.baosight.hidePageLoadingMsg() // 隐藏进度条
            })
        }


    </script>
</head>
<body>

<!--输入框-->
<input type="text" class="form-control" id="inputContent" placeholder="请输入内容" style="width: 600px">
<br>
<!--按钮组-->
<div class="btn-group btn-group-lg" role="group">
    <button type="button" class="btn btn-default" onclick="addGenesis()">添加封面</button>
    <button type="button" class="btn btn-default" onclick="addNote()">添加记录</button>
    <button type="button" class="btn btn-default" onclick="showList()">展示数据</button>
    <button type="button" class="btn btn-default" onclick="check()">校验数据</button>
</div>
<br>
<!--用于展示结果-->
<p class="bg-info" id="result">

</p>

<table class="table">
    <caption>Optional table caption.</caption>
    <thead>
    <tr>
        <th>id</th>
        <th>content</th>
        <th>hash</th>
        <th>nonce</th>
    </tr>
    </thead>
    <tbody id="tbody">


    </tbody>
</table>

</body>
</html>